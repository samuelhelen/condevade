
upstream service1 {
	server service1:8199;
}

server {
	include /etc/nginx/mime.types;

	listen 8198;

	resolver 127.0.0.11 valid=5s;

	location /api {
		auth_basic "Restricted Access";
		auth_basic_user_file /etc/nginx/.htpasswd;

		proxy_pass http://service1/;
	}
}

# First attempt to serve request as file, then
# as directory, then fall back to redirecting to index.html
# location {
# try_files $uri $uri/ /index.html;
# }
